Création d'un container LXC Debian pour Docker

Nested et NFS sont à activer dans Options

apt update && apt install apt-transport-https ca-certificates curl gnupg2 software-properties-common

Ajout du dépôt officiel de docker:

curl -fsSL https://download.docker.com/linux/debian/gpg | gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian $(lsb_release -cs) stable" | tee /etc/apt/sources.list.d/docker.list

apt update

apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin nfs-common

Pour tester la bonne installation, on lance
docker run hello-world

Si besoin systemctl enable docker --now

Montage NFS depuis la machine proxmox 192.168.1.20
Dans le container docker
le contenu du fichier /etc/fstab en supposant qu'on partage le repertoire depuis Proxmox /data vers le container docker dans /srv/data

192.168.1.20:/data      /srv/data       nfs     defaults        0 0
